"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("@wdio/logger"));
var _util = require("./util.js");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
const log = (0, _logger.default)('@wdio/lambdatest-service');
const DEFAULT_OPTIONS = {
  setSessionName: true,
  setSessionStatus: true
};
class LambdaRestService {
  constructor(options = {}, capabilities = {}, config = {}) {
    var _this$_config, _this$_config2;
    _defineProperty(this, "_api", void 0);
    _defineProperty(this, "_browser", void 0);
    _defineProperty(this, "_capabilities", void 0);
    _defineProperty(this, "_config", void 0);
    _defineProperty(this, "_failReasons", []);
    _defineProperty(this, "_failures", 0);
    _defineProperty(this, "_failureStatuses", ['failed', 'ambiguous', 'undefined', 'unknown']);
    _defineProperty(this, "_fullTitle", void 0);
    _defineProperty(this, "_isServiceEnabled", true);
    _defineProperty(this, "_options", DEFAULT_OPTIONS);
    _defineProperty(this, "_scenariosThatRan", []);
    _defineProperty(this, "_specsRan", false);
    _defineProperty(this, "_suiteTitle", void 0);
    _defineProperty(this, "_testCnt", 0);
    _defineProperty(this, "_testTitle", void 0);
    _defineProperty(this, "_error", void 0);
    _defineProperty(this, "_ltErrorRemark", void 0);
    _defineProperty(this, "_useScenarioName", void 0);
    _defineProperty(this, "_lambdaCredentials", void 0);
    _defineProperty(this, "_currentTestTitle", void 0);
    this._options = {
      ...DEFAULT_OPTIONS,
      ...options
    };
    this._capabilities = capabilities;
    this._config = config;
    this._testCnt = 0;
    this._failures = 0;
    const strict = Boolean(((_this$_config = this._config) === null || _this$_config === void 0 ? void 0 : _this$_config.cucumberOpts) && ((_this$_config2 = this._config) === null || _this$_config2 === void 0 || (_this$_config2 = _this$_config2.cucumberOpts) === null || _this$_config2 === void 0 ? void 0 : _this$_config2.strict));
    if (strict) {
      this._failureStatuses.push('pending');
    }
  }
  before(caps, specs, browser) {
    this._browser = browser;
    this._scenariosThatRan = [];
  }
  beforeSession(config, capabilities) {
    this._config = {
      ...this._config,
      ...config
    };
    this._capabilities = {
      ...this._capabilities,
      ...capabilities
    };
    const lambdaCredentials = {
      username: this._config.user,
      accessKey: this._config.key,
      isApp: false
    };
    if (this._config.product === 'appAutomation') {
      lambdaCredentials.isApp = true;
    }
    if (this._config.logFile) {
      lambdaCredentials.logFile = this._config.logFile;
    }
    if (this._config.ltErrorRemark === true) {
      this._ltErrorRemark = true;
    }
    if (this._config.useScenarioName === true) {
      this._useScenarioName = true;
    }
    this._isServiceEnabled = lambdaCredentials.username && lambdaCredentials.accessKey;
    this._lambdaCredentials = lambdaCredentials;
  }
  async beforeScenario(world, context) {
    if (this._useScenarioName) {
      var _world$pickle;
      this._testTitle = (world === null || world === void 0 || (_world$pickle = world.pickle) === null || _world$pickle === void 0 ? void 0 : _world$pickle.name) || 'unknown scenario';
    } else if (!this._suiteTitle) {
      var _world$gherkinDocumen, _context$document, _world$pickle2;
      this._suiteTitle = (world === null || world === void 0 || (_world$gherkinDocumen = world.gherkinDocument) === null || _world$gherkinDocumen === void 0 || (_world$gherkinDocumen = _world$gherkinDocumen.feature) === null || _world$gherkinDocumen === void 0 ? void 0 : _world$gherkinDocumen.name) || (context === null || context === void 0 || (_context$document = context.document) === null || _context$document === void 0 || (_context$document = _context$document.feature) === null || _context$document === void 0 ? void 0 : _context$document.name) || (world === null || world === void 0 || (_world$pickle2 = world.pickle) === null || _world$pickle2 === void 0 ? void 0 : _world$pickle2.name) || 'unknown scenario';
    }
    await this.setSessionName(this._testTitle || this._suiteTitle);
  }
  async beforeSuite(suite) {
    this._suiteTitle = suite.title;
    if (suite.title && suite.title !== 'Jasmine__TopLevel__Suite') {
      await this.setSessionName(suite.title);
    }
  }
  async beforeTest(test) {
    if (!this._isServiceEnabled) {
      return;
    }
    if (test && (test === null || test === void 0 ? void 0 : test.parent) !== undefined) {
      this._currentTestTitle = test === null || test === void 0 ? void 0 : test.parent;
      this._currentTestTitle = `${this._currentTestTitle} - ${test === null || test === void 0 ? void 0 : test.title}`;
    } else if (test && (test === null || test === void 0 ? void 0 : test.fullName) !== undefined) {
      this._currentTestTitle = test === null || test === void 0 ? void 0 : test.fullName;
    }
    if (test.title && !this._testTitle) {
      this._testTitle = test.title;
    }
    let suiteTitle = this._suiteTitle;
    if (test.fullName) {
      const testSuiteName = test.fullName;
      if (this._suiteTitle === 'Jasmine__TopLevel__Suite') {
        suiteTitle = testSuiteName;
      } else if (this._suiteTitle) {
        suiteTitle = (0, _util.getParentSuiteName)(this._suiteTitle, testSuiteName);
      }
    }
    await this.setSessionName(suiteTitle, test);
  }
  async beforeFeature(uri, feature) {
    this._suiteTitle = feature.name;
    await this.setSessionName(this._suiteTitle);
  }
  async beforeStep(step) {
    if (!this._suiteTitle || this._suiteTitle == 'unknown scenario') {
      var _step$document, _step$step;
      this._suiteTitle = ((_step$document = step.document) === null || _step$document === void 0 || (_step$document = _step$document.feature) === null || _step$document === void 0 ? void 0 : _step$document.name) || ((_step$step = step.step) === null || _step$step === void 0 || (_step$step = _step$step.scenario) === null || _step$step === void 0 ? void 0 : _step$step.name) || 'unknown scenario';
      await this.setSessionName(this._suiteTitle);
    }
  }
  afterSuite(suite) {
    if (Object.prototype.hasOwnProperty.call(suite, 'error')) {
      ++this._failures;
    }
  }
  afterTest(test, context, {
    error,
    passed
  }) {
    this._specsRan = true;
    if (test._retriedTest && passed) {
      --this._failures;
      return;
    }
    if (test._retriedTest && !passed && typeof test._currentRetry === 'number' && typeof test._retries === 'number' && test._currentRetry < test._retries) {
      return;
    }
    const isJasminePendingError = typeof error === 'string' && error.includes('marked Pending');
    if (!passed && !isJasminePendingError) {
      ++this._failures;
      this._failReasons.push(error && error.message || 'Unknown Error');
      this._error = (error === null || error === void 0 ? void 0 : error.message) || 'Unknown Error';
      if (this._ltErrorRemark && this._error !== null && this._error !== undefined) {
        this._setSessionRemarks(this._error);
      }
    }
  }
  afterScenario(world, result) {
    var _world$result;
    const {
      passed
    } = result || {};
    this._specsRan = true;
    const status = (_world$result = world.result) === null || _world$result === void 0 ? void 0 : _world$result.status.toLowerCase();
    if (status !== 'skipped') {
      this._scenariosThatRan.push(world.pickle.name || 'unknown pickle name');
    }
    if (status && this._failureStatuses.includes(status)) {
      const exception = world.result && world.result.message || (status === 'pending' ? `Some steps/hooks are pending for scenario "${world.pickle.name}"` : 'Unknown Error');
      ++this._failures;
      this._failReasons.push(exception);
    } else if (typeof passed !== 'undefined' && !passed) {
      ++this._failures;
    }
  }
  after(result) {
    if (!this._isServiceEnabled) {
      return;
    }
    let failures = this._failures;
    if (this._config.mochaOpts && this._config.mochaOpts.bail && Boolean(result)) {
      failures = 1;
    }
    if (result === 0) {
      failures = 0;
    }
    const {
      preferScenarioName
    } = this._options;
    if (preferScenarioName && this._scenariosThatRan.length === 1) {
      this._fullTitle = this._scenariosThatRan.pop();
    }
    const status = 'status: ' + (result > 0 ? 'failed' : 'passed');
    if (!this._browser.isMultiremote) {
      log.info(`Update job with sessionId ${this._browser.sessionId}, ${status}`);
      return this._update({
        sessionId: this._browser.sessionId,
        failures: result
      });
    }
    return Promise.all(Object.keys(this._capabilities).map(browserName => {
      log.info(`Update multiremote job for browser '${browserName}' and sessionId ${this._browser[browserName].sessionId}, ${status}`);
      return this._update({
        sessionId: this._browser[browserName].sessionId,
        failures: failures,
        calledOnReload: false,
        browserName: browserName
      });
    }));
  }
  async onReload(oldSessionId, newSessionId) {
    if (!this._isServiceEnabled) {
      return;
    }
    const status = this._failures > 0 ? 'failed' : 'passed';
    if (!this._browser.isMultiremote) {
      log.info(`Update (reloaded) job with sessionId ${oldSessionId}, ${status}`);
      await this._update({
        sessionId: oldSessionId,
        fullTitle: this._currentTestTitle,
        status: status,
        calledOnReload: true
      });
    } else {
      const browserName = this._browser.instances.filter(browserName => this._browser[browserName].sessionId === newSessionId)[0];
      log.info(`Update (reloaded) multiremote job for browser '${browserName}' and sessionId ${oldSessionId}, ${status}`);
      await this._update({
        sessionId: oldSessionId,
        failures: this._failures,
        calledOnReload: true,
        browserName: browserName
      });
    }
    this._failReasons = [];
    this._scenariosThatRan = [];
    delete this._suiteTitle;
    delete this._fullTitle;
  }
  async _update({
    sessionId,
    fullTitle,
    status,
    failures,
    calledOnReload = false,
    browserName
  }) {
    if (!this._options.setSessionStatus) {
      return;
    }
    const sleep = ms => new Promise(r => setTimeout(r, ms));
    await sleep(5000);
    if (calledOnReload) {
      return await this.updateJob({
        sessionId,
        fullTitle,
        status,
        calledOnReload,
        browserName
      });
    }
    return await this.updateJob({
      sessionId,
      _failures: failures,
      calledOnReload,
      browserName
    });
  }
  async updateJob({
    sessionId,
    fullTitle,
    status,
    _failures,
    calledOnReload = false,
    browserName
  }) {
    let body = this.getBody({
      _failures,
      calledOnReload,
      browserName
    });
    if (calledOnReload) {
      body = this.getBody({
        fullTitle,
        status,
        calledOnReload,
        browserName
      });
    }
    try {
      await (0, _util.updateSessionById)(sessionId, body, this._lambdaCredentials);
    } catch (ex) {
      console.log(ex);
    }
    this._failures = 0;
  }
  getBody({
    fullTitle,
    status,
    _failures,
    calledOnReload = false,
    browserName
  }) {
    let body = {};
    if (!(!this._browser.isMultiremote && this._capabilities.name || this._browser.isMultiremote && this._capabilities[browserName].capabilities.name)) {
      body.name = this._fullTitle;
      if (calledOnReload) {
        body.name = fullTitle;
      }
      if (this._capabilities['LT:Options'] && this._capabilities['LT:Options'].name) {
        body.name = this._capabilities['LT:Options'].name;
      }
      if (browserName) {
        body.name = `${browserName}: ${body.name}`;
      }
      if (calledOnReload || this._testCnt) {
        let testCnt = ++this._testCnt;
        if (this._browser.isMultiremote) {
          testCnt = Math.ceil(testCnt / this._browser.instances.length);
        }
        if (!calledOnReload) {
          body.name += ` (${testCnt})`;
        }
      }
    }
    body.status_ind = _failures > 0 ? 'failed' : 'passed';
    if (calledOnReload) {
      body.status_ind = status;
    }
    return body;
  }
  async setSessionName(suiteTitle, test) {
    if (!this._options.setSessionName || !suiteTitle) {
      return;
    }
    let name = this._useScenarioName && this._testTitle ? this._testTitle : suiteTitle;
    if (this._options.sessionNameFormat) {
      name = this._options.sessionNameFormat(this._config, this._capabilities, suiteTitle, test === null || test === void 0 ? void 0 : test.title);
    } else if (test && !test.fullName) {
      const pre = this._options.sessionNamePrependTopLevelSuiteTitle ? `${suiteTitle} - ` : '';
      const post = !this._options.sessionNameOmitTestTitle ? ` - ${test.title}` : '';
      name = `${pre}${test.parent}${post}`;
    }
    if (name !== this.__fullTitle) {
      this.__fullTitle = name;
      await this._setSessionName(name);
    }
  }
  async _setSessionRemarks(err) {
    let replacedString = err.replace(/"/g, "'");
    let errorCustom = `lambda-hook: {"action": "setTestStatus","arguments": {"status":"failed","remark":"${replacedString}"}}`;
    try {
      await this._browser.execute(errorCustom);
    } catch (error) {
      console.log(error);
    }
  }
  async _setSessionName(sessionName) {
    await this._executeCommand(`lambda-name=${sessionName}`);
  }
  async _executeCommand(cmd) {
    if (!this._browser) {
      return;
    }
    if (this._browser.isMultiremote) {
      return Promise.all(Object.keys(this._capabilities).map(async browserName => {
        const browser = this._browser[browserName];
        return await browser.execute(cmd);
      }));
    }
    return await this._browser.execute(cmd);
  }
}
exports.default = LambdaRestService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2RlZmluZVByb3BlcnR5Iiwia2V5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiY2FsbCIsIlR5cGVFcnJvciIsIk51bWJlciIsImxvZyIsImxvZ2dlciIsIkRFRkFVTFRfT1BUSU9OUyIsInNldFNlc3Npb25OYW1lIiwic2V0U2Vzc2lvblN0YXR1cyIsIkxhbWJkYVJlc3RTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiY2FwYWJpbGl0aWVzIiwiY29uZmlnIiwiX3RoaXMkX2NvbmZpZyIsIl90aGlzJF9jb25maWcyIiwiX29wdGlvbnMiLCJfY2FwYWJpbGl0aWVzIiwiX2NvbmZpZyIsIl90ZXN0Q250IiwiX2ZhaWx1cmVzIiwic3RyaWN0IiwiQm9vbGVhbiIsImN1Y3VtYmVyT3B0cyIsIl9mYWlsdXJlU3RhdHVzZXMiLCJwdXNoIiwiYmVmb3JlIiwiY2FwcyIsInNwZWNzIiwiYnJvd3NlciIsIl9icm93c2VyIiwiX3NjZW5hcmlvc1RoYXRSYW4iLCJiZWZvcmVTZXNzaW9uIiwibGFtYmRhQ3JlZGVudGlhbHMiLCJ1c2VybmFtZSIsInVzZXIiLCJhY2Nlc3NLZXkiLCJpc0FwcCIsInByb2R1Y3QiLCJsb2dGaWxlIiwibHRFcnJvclJlbWFyayIsIl9sdEVycm9yUmVtYXJrIiwidXNlU2NlbmFyaW9OYW1lIiwiX3VzZVNjZW5hcmlvTmFtZSIsIl9pc1NlcnZpY2VFbmFibGVkIiwiX2xhbWJkYUNyZWRlbnRpYWxzIiwiYmVmb3JlU2NlbmFyaW8iLCJ3b3JsZCIsImNvbnRleHQiLCJfd29ybGQkcGlja2xlIiwiX3Rlc3RUaXRsZSIsInBpY2tsZSIsIm5hbWUiLCJfc3VpdGVUaXRsZSIsIl93b3JsZCRnaGVya2luRG9jdW1lbiIsIl9jb250ZXh0JGRvY3VtZW50IiwiX3dvcmxkJHBpY2tsZTIiLCJnaGVya2luRG9jdW1lbnQiLCJmZWF0dXJlIiwiZG9jdW1lbnQiLCJiZWZvcmVTdWl0ZSIsInN1aXRlIiwidGl0bGUiLCJiZWZvcmVUZXN0IiwidGVzdCIsInBhcmVudCIsIl9jdXJyZW50VGVzdFRpdGxlIiwiZnVsbE5hbWUiLCJzdWl0ZVRpdGxlIiwidGVzdFN1aXRlTmFtZSIsImdldFBhcmVudFN1aXRlTmFtZSIsImJlZm9yZUZlYXR1cmUiLCJ1cmkiLCJiZWZvcmVTdGVwIiwic3RlcCIsIl9zdGVwJGRvY3VtZW50IiwiX3N0ZXAkc3RlcCIsInNjZW5hcmlvIiwiYWZ0ZXJTdWl0ZSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiYWZ0ZXJUZXN0IiwiZXJyb3IiLCJwYXNzZWQiLCJfc3BlY3NSYW4iLCJfcmV0cmllZFRlc3QiLCJfY3VycmVudFJldHJ5IiwiX3JldHJpZXMiLCJpc0phc21pbmVQZW5kaW5nRXJyb3IiLCJpbmNsdWRlcyIsIl9mYWlsUmVhc29ucyIsIm1lc3NhZ2UiLCJfZXJyb3IiLCJfc2V0U2Vzc2lvblJlbWFya3MiLCJhZnRlclNjZW5hcmlvIiwicmVzdWx0IiwiX3dvcmxkJHJlc3VsdCIsInN0YXR1cyIsInRvTG93ZXJDYXNlIiwiZXhjZXB0aW9uIiwiYWZ0ZXIiLCJmYWlsdXJlcyIsIm1vY2hhT3B0cyIsImJhaWwiLCJwcmVmZXJTY2VuYXJpb05hbWUiLCJsZW5ndGgiLCJfZnVsbFRpdGxlIiwicG9wIiwiaXNNdWx0aXJlbW90ZSIsImluZm8iLCJzZXNzaW9uSWQiLCJfdXBkYXRlIiwiUHJvbWlzZSIsImFsbCIsImtleXMiLCJtYXAiLCJicm93c2VyTmFtZSIsImNhbGxlZE9uUmVsb2FkIiwib25SZWxvYWQiLCJvbGRTZXNzaW9uSWQiLCJuZXdTZXNzaW9uSWQiLCJmdWxsVGl0bGUiLCJpbnN0YW5jZXMiLCJmaWx0ZXIiLCJzbGVlcCIsIm1zIiwiciIsInNldFRpbWVvdXQiLCJ1cGRhdGVKb2IiLCJib2R5IiwiZ2V0Qm9keSIsInVwZGF0ZVNlc3Npb25CeUlkIiwiZXgiLCJjb25zb2xlIiwidGVzdENudCIsIk1hdGgiLCJjZWlsIiwic3RhdHVzX2luZCIsInNlc3Npb25OYW1lRm9ybWF0IiwicHJlIiwic2Vzc2lvbk5hbWVQcmVwZW5kVG9wTGV2ZWxTdWl0ZVRpdGxlIiwicG9zdCIsInNlc3Npb25OYW1lT21pdFRlc3RUaXRsZSIsIl9fZnVsbFRpdGxlIiwiX3NldFNlc3Npb25OYW1lIiwiZXJyIiwicmVwbGFjZWRTdHJpbmciLCJyZXBsYWNlIiwiZXJyb3JDdXN0b20iLCJleGVjdXRlIiwic2Vzc2lvbk5hbWUiLCJfZXhlY3V0ZUNvbW1hbmQiLCJjbWQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vc3JjL3NlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICdAd2Rpby9sb2dnZXInXG5cbmltcG9ydCB7IGdldFBhcmVudFN1aXRlTmFtZSwgdXBkYXRlU2Vzc2lvbkJ5SWQgfSBmcm9tICcuL3V0aWwuanMnXG5cbmNvbnN0IGxvZyA9IGxvZ2dlcignQHdkaW8vbGFtYmRhdGVzdC1zZXJ2aWNlJylcblxuLyoqIEB0eXBlIHtpbXBvcnQoJy4vdHlwZXMuanMnKS5MVE9wdGlvbnMgJiBpbXBvcnQoJy4vdHlwZXMuanMnKS5TZXNzaW9uTmFtZU9wdGlvbnN9ICovXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSB7XG4gIHNldFNlc3Npb25OYW1lOiB0cnVlLFxuICBzZXRTZXNzaW9uU3RhdHVzOiB0cnVlLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGFtYmRhUmVzdFNlcnZpY2Uge1xuICBfYXBpO1xuICBfYnJvd3NlcjtcbiAgX2NhcGFiaWxpdGllcztcbiAgX2NvbmZpZztcbiAgX2ZhaWxSZWFzb25zID0gW107XG4gIF9mYWlsdXJlcyA9IDA7XG4gIF9mYWlsdXJlU3RhdHVzZXMgPSBbJ2ZhaWxlZCcsICdhbWJpZ3VvdXMnLCAndW5kZWZpbmVkJywgJ3Vua25vd24nXTtcbiAgX2Z1bGxUaXRsZTtcbiAgX2lzU2VydmljZUVuYWJsZWQgPSB0cnVlO1xuICBfb3B0aW9ucyA9IERFRkFVTFRfT1BUSU9OUztcbiAgX3NjZW5hcmlvc1RoYXRSYW4gPSBbXTtcbiAgX3NwZWNzUmFuID0gZmFsc2U7XG4gIF9zdWl0ZVRpdGxlO1xuICBfdGVzdENudCA9IDA7XG4gIF90ZXN0VGl0bGU7XG4gIF9lcnJvcjtcbiAgX2x0RXJyb3JSZW1hcms7XG4gIF91c2VTY2VuYXJpb05hbWU7XG4gIF9sYW1iZGFDcmVkZW50aWFscztcbiAgX2N1cnJlbnRUZXN0VGl0bGU7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9LCBjYXBhYmlsaXRpZXMgPSB7fSwgY29uZmlnID0ge30pIHtcbiAgICB0aGlzLl9vcHRpb25zID0geyAuLi5ERUZBVUxUX09QVElPTlMsIC4uLm9wdGlvbnMgfTtcbiAgICB0aGlzLl9jYXBhYmlsaXRpZXMgPSBjYXBhYmlsaXRpZXM7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX3Rlc3RDbnQgPSAwO1xuICAgIHRoaXMuX2ZhaWx1cmVzID0gMDtcbiAgICAvLyBDdWN1bWJlciBzcGVjaWZpY1xuICAgIGNvbnN0IHN0cmljdCA9IEJvb2xlYW4odGhpcy5fY29uZmlnPy5jdWN1bWJlck9wdHMgJiYgdGhpcy5fY29uZmlnPy5jdWN1bWJlck9wdHM/LnN0cmljdCk7XG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWN1bWJlci9jdWN1bWJlci1qcy9ibG9iL21hc3Rlci9zcmMvcnVudGltZS9pbmRleC50cyNMMTM2XG4gICAgaWYgKHN0cmljdCkge1xuICAgICAgdGhpcy5fZmFpbHVyZVN0YXR1c2VzLnB1c2goJ3BlbmRpbmcnKTtcbiAgICB9XG4gIH1cblxuICBiZWZvcmUoY2Fwcywgc3BlY3MsIGJyb3dzZXIpIHtcbiAgICB0aGlzLl9icm93c2VyID0gYnJvd3NlcjtcbiAgICB0aGlzLl9zY2VuYXJpb3NUaGF0UmFuID0gW107XG4gIH1cblxuICBiZWZvcmVTZXNzaW9uKGNvbmZpZywgY2FwYWJpbGl0aWVzKSB7XG4gICAgdGhpcy5fY29uZmlnID0geyAuLi50aGlzLl9jb25maWcsIC4uLmNvbmZpZyB9O1xuICAgIHRoaXMuX2NhcGFiaWxpdGllcyA9IHsgLi4udGhpcy5fY2FwYWJpbGl0aWVzLCAuLi5jYXBhYmlsaXRpZXMgfTtcbiAgICBjb25zdCBsYW1iZGFDcmVkZW50aWFscyA9IHtcbiAgICAgIHVzZXJuYW1lOiB0aGlzLl9jb25maWcudXNlcixcbiAgICAgIGFjY2Vzc0tleTogdGhpcy5fY29uZmlnLmtleSxcbiAgICAgIGlzQXBwIDogZmFsc2VcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuX2NvbmZpZy5wcm9kdWN0ID09PSAnYXBwQXV0b21hdGlvbicpIHtcbiAgICAgIGxhbWJkYUNyZWRlbnRpYWxzLmlzQXBwID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY29uZmlnLmxvZ0ZpbGUpIHtcbiAgICAgIGxhbWJkYUNyZWRlbnRpYWxzLmxvZ0ZpbGUgPSB0aGlzLl9jb25maWcubG9nRmlsZTtcbiAgICB9XG4gICAgaWYodGhpcy5fY29uZmlnLmx0RXJyb3JSZW1hcmsgPT09dHJ1ZSlcbiAgICB7XG4gICAgICB0aGlzLl9sdEVycm9yUmVtYXJrPXRydWU7XG4gICAgfVxuICAgIC8vIEN1Y3VtYmVyIHNwZWNpZmljIG9wdGlvbiB0byBzZXQgdGVzdCBuYW1lIGZyb20gc2NlbmFyaW9cbiAgICBpZih0aGlzLl9jb25maWcudXNlU2NlbmFyaW9OYW1lID09PSB0cnVlKVxuICAgIHtcbiAgICAgIHRoaXMuX3VzZVNjZW5hcmlvTmFtZT10cnVlO1xuICAgIH1cblxuICAgIHRoaXMuX2lzU2VydmljZUVuYWJsZWQgPSBsYW1iZGFDcmVkZW50aWFscy51c2VybmFtZSAmJiBsYW1iZGFDcmVkZW50aWFscy5hY2Nlc3NLZXk7XG4gICAgdGhpcy5fbGFtYmRhQ3JlZGVudGlhbHM9bGFtYmRhQ3JlZGVudGlhbHM7XG4gICAgXG4gIH1cblxuICBhc3luYyBiZWZvcmVTY2VuYXJpbyh3b3JsZCwgY29udGV4dCkge1xuICAgIGlmICh0aGlzLl91c2VTY2VuYXJpb05hbWUpIHtcbiAgICAgIHRoaXMuX3Rlc3RUaXRsZSA9IHdvcmxkPy5waWNrbGU/Lm5hbWUgfHwgJ3Vua25vd24gc2NlbmFyaW8nO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuX3N1aXRlVGl0bGUpIHtcbiAgICAgIHRoaXMuX3N1aXRlVGl0bGUgPVxuICAgICAgICB3b3JsZD8uZ2hlcmtpbkRvY3VtZW50Py5mZWF0dXJlPy5uYW1lIHx8XG4gICAgICAgIGNvbnRleHQ/LmRvY3VtZW50Py5mZWF0dXJlPy5uYW1lIHx8XG4gICAgICAgIHdvcmxkPy5waWNrbGU/Lm5hbWUgfHxcbiAgICAgICAgJ3Vua25vd24gc2NlbmFyaW8nO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLnNldFNlc3Npb25OYW1lKHRoaXMuX3Rlc3RUaXRsZSB8fCB0aGlzLl9zdWl0ZVRpdGxlKTtcbiAgfVxuXG4gIGFzeW5jIGJlZm9yZVN1aXRlKHN1aXRlKSB7XG4gICAgdGhpcy5fc3VpdGVUaXRsZSA9IHN1aXRlLnRpdGxlO1xuXG4gICAgaWYgKHN1aXRlLnRpdGxlICYmIHN1aXRlLnRpdGxlICE9PSAnSmFzbWluZV9fVG9wTGV2ZWxfX1N1aXRlJykge1xuICAgICAgYXdhaXQgdGhpcy5zZXRTZXNzaW9uTmFtZShzdWl0ZS50aXRsZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYmVmb3JlVGVzdCh0ZXN0KSB7XG4gICAgaWYgKCF0aGlzLl9pc1NlcnZpY2VFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRlc3QgJiYgdGVzdD8ucGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRUZXN0VGl0bGUgPSB0ZXN0Py5wYXJlbnQ7XG4gICAgICB0aGlzLl9jdXJyZW50VGVzdFRpdGxlID0gYCR7dGhpcy5fY3VycmVudFRlc3RUaXRsZX0gLSAke3Rlc3Q/LnRpdGxlfWA7XG4gIH0gZWxzZSBpZiAodGVzdCAmJiB0ZXN0Py5mdWxsTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jdXJyZW50VGVzdFRpdGxlID0gdGVzdD8uZnVsbE5hbWU7XG4gIH1cblxuICAgIGlmICh0ZXN0LnRpdGxlICYmICF0aGlzLl90ZXN0VGl0bGUpIHtcbiAgICAgIHRoaXMuX3Rlc3RUaXRsZSA9IHRlc3QudGl0bGU7XG4gICAgfVxuXG4gICAgbGV0IHN1aXRlVGl0bGUgPSB0aGlzLl9zdWl0ZVRpdGxlO1xuXG4gICAgaWYgKHRlc3QuZnVsbE5hbWUpIHtcbiAgICAgIC8vIEZvciBKYXNtaW5lLCBgc3VpdGUudGl0bGVgIGlzIGBKYXNtaW5lX19Ub3BMZXZlbF9fU3VpdGVgLlxuICAgICAgLy8gVGhpcyB0d2VhayBhbGxvd3MgdXMgdG8gc2V0IHRoZSByZWFsIHN1aXRlIG5hbWUuXG4gICAgICBjb25zdCB0ZXN0U3VpdGVOYW1lID0gdGVzdC5mdWxsTmFtZTtcbiAgICAgIGlmICh0aGlzLl9zdWl0ZVRpdGxlID09PSAnSmFzbWluZV9fVG9wTGV2ZWxfX1N1aXRlJykge1xuICAgICAgICBzdWl0ZVRpdGxlID0gdGVzdFN1aXRlTmFtZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fc3VpdGVUaXRsZSkge1xuICAgICAgICBzdWl0ZVRpdGxlID0gZ2V0UGFyZW50U3VpdGVOYW1lKHRoaXMuX3N1aXRlVGl0bGUsIHRlc3RTdWl0ZU5hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuc2V0U2Vzc2lvbk5hbWUoc3VpdGVUaXRsZSwgdGVzdCk7XG4gIH1cblxuICBhc3luYyBiZWZvcmVGZWF0dXJlKHVyaSwgZmVhdHVyZSkge1xuICAgIHRoaXMuX3N1aXRlVGl0bGUgPSBmZWF0dXJlLm5hbWU7XG4gICAgYXdhaXQgdGhpcy5zZXRTZXNzaW9uTmFtZSh0aGlzLl9zdWl0ZVRpdGxlKTtcbiAgfVxuXG4gIGFzeW5jIGJlZm9yZVN0ZXAoc3RlcCkge1xuICAgIGlmICghdGhpcy5fc3VpdGVUaXRsZSB8fCB0aGlzLl9zdWl0ZVRpdGxlID09ICd1bmtub3duIHNjZW5hcmlvJykge1xuICAgICAgdGhpcy5fc3VpdGVUaXRsZSA9XG4gICAgICAgIHN0ZXAuZG9jdW1lbnQ/LmZlYXR1cmU/Lm5hbWUgfHxcbiAgICAgICAgc3RlcC5zdGVwPy5zY2VuYXJpbz8ubmFtZSB8fFxuICAgICAgICAndW5rbm93biBzY2VuYXJpbyc7XG4gICAgICBhd2FpdCB0aGlzLnNldFNlc3Npb25OYW1lKHRoaXMuX3N1aXRlVGl0bGUpO1xuICAgIH1cbiAgfVxuXG4gIGFmdGVyU3VpdGUoc3VpdGUpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHN1aXRlLCAnZXJyb3InKSkge1xuICAgICAgKyt0aGlzLl9mYWlsdXJlcztcbiAgICB9XG4gIH1cblxuICBhZnRlclRlc3QodGVzdCwgY29udGV4dCwgeyBlcnJvciwgcGFzc2VkIH0pIHtcbiAgICB0aGlzLl9zcGVjc1JhbiA9IHRydWU7XG5cbiAgICAvLyByZW1vdmUgZmFpbHVyZSBpZiB0ZXN0IHdhcyByZXRyaWVkIGFuZCBwYXNzZWRcbiAgICAvLyAoTW9jaGEgb25seSlcbiAgICBpZiAodGVzdC5fcmV0cmllZFRlc3QgJiYgcGFzc2VkKSB7XG4gICAgICAtLXRoaXMuX2ZhaWx1cmVzO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGRvbid0IGJ1bXAgZmFpbHVyZSBudW1iZXIgaWYgdGVzdCB3YXMgcmV0cmllZCBhbmQgc3RpbGwgZmFpbGVkXG4gICAgLy8gKE1vY2hhIG9ubHkpXG4gICAgaWYgKFxuICAgICAgdGVzdC5fcmV0cmllZFRlc3QgJiZcbiAgICAgICFwYXNzZWQgJiZcbiAgICAgIChcbiAgICAgICAgdHlwZW9mIHRlc3QuX2N1cnJlbnRSZXRyeSA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgdHlwZW9mIHRlc3QuX3JldHJpZXMgPT09ICdudW1iZXInICYmXG4gICAgICAgIHRlc3QuX2N1cnJlbnRSZXRyeSA8IHRlc3QuX3JldHJpZXNcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpc0phc21pbmVQZW5kaW5nRXJyb3IgPSB0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnICYmIGVycm9yLmluY2x1ZGVzKCdtYXJrZWQgUGVuZGluZycpO1xuICAgIGlmICghcGFzc2VkICYmICFpc0phc21pbmVQZW5kaW5nRXJyb3IpIHtcbiAgICAgICsrdGhpcy5fZmFpbHVyZXM7XG4gICAgICB0aGlzLl9mYWlsUmVhc29ucy5wdXNoKChlcnJvciAmJiBlcnJvci5tZXNzYWdlKSB8fCAnVW5rbm93biBFcnJvcicpXG4gICAgICB0aGlzLl9lcnJvcj1lcnJvcj8ubWVzc2FnZSB8fCAnVW5rbm93biBFcnJvcic7XG4gICAgICBpZiAodGhpcy5fbHRFcnJvclJlbWFyayAmJiB0aGlzLl9lcnJvciAhPT0gbnVsbCAmJiB0aGlzLl9lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3NldFNlc3Npb25SZW1hcmtzKHRoaXMuX2Vycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhZnRlclNjZW5hcmlvKHdvcmxkLCByZXN1bHQpIHtcbiAgICBjb25zdCB7IHBhc3NlZCB9ID0gcmVzdWx0IHx8IHt9O1xuICAgIHRoaXMuX3NwZWNzUmFuID0gdHJ1ZTtcbiAgICBjb25zdCBzdGF0dXMgPSB3b3JsZC5yZXN1bHQ/LnN0YXR1cy50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChzdGF0dXMgIT09ICdza2lwcGVkJykge1xuICAgICAgdGhpcy5fc2NlbmFyaW9zVGhhdFJhbi5wdXNoKHdvcmxkLnBpY2tsZS5uYW1lIHx8ICd1bmtub3duIHBpY2tsZSBuYW1lJyk7XG4gICAgfVxuICAgIGlmIChzdGF0dXMgJiYgdGhpcy5fZmFpbHVyZVN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgIGNvbnN0IGV4Y2VwdGlvbiA9IChcbiAgICAgICAgKHdvcmxkLnJlc3VsdCAmJiB3b3JsZC5yZXN1bHQubWVzc2FnZSkgfHxcbiAgICAgICAgKHN0YXR1cyA9PT0gJ3BlbmRpbmcnXG4gICAgICAgICAgPyBgU29tZSBzdGVwcy9ob29rcyBhcmUgcGVuZGluZyBmb3Igc2NlbmFyaW8gXCIke3dvcmxkLnBpY2tsZS5uYW1lfVwiYFxuICAgICAgICAgIDogJ1Vua25vd24gRXJyb3InXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgICsrdGhpcy5fZmFpbHVyZXM7XG4gICAgICB0aGlzLl9mYWlsUmVhc29ucy5wdXNoKGV4Y2VwdGlvbilcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXNzZWQgIT09ICd1bmRlZmluZWQnICYmICFwYXNzZWQpIHtcbiAgICAgICsrdGhpcy5fZmFpbHVyZXM7XG4gICAgfVxuICB9XG5cbiAgYWZ0ZXIocmVzdWx0KSB7XG4gICAgaWYgKCF0aGlzLl9pc1NlcnZpY2VFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGZhaWx1cmVzID0gdGhpcy5fZmFpbHVyZXM7XG5cbiAgICAvLyBzZXQgX2ZhaWx1cmVzIGlmIHVzZXIgaGFzIGJhaWwgb3B0aW9uIHNldCBpbiB3aGljaCBjYXNlIGFmdGVyVGVzdCBhbmRcbiAgICAvLyBhZnRlclN1aXRlIGFyZW4ndCBleGVjdXRlZCBiZWZvcmUgYWZ0ZXIgaG9va1xuICAgIGlmICh0aGlzLl9jb25maWcubW9jaGFPcHRzICYmIHRoaXMuX2NvbmZpZy5tb2NoYU9wdHMuYmFpbCAmJiBCb29sZWFuKHJlc3VsdCkpIHtcbiAgICAgIGZhaWx1cmVzID0gMTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID09PSAwKSB7XG4gICAgICBmYWlsdXJlcyA9IDA7XG4gICAgfVxuXG4gICAgY29uc3QgeyBwcmVmZXJTY2VuYXJpb05hbWUgfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgLy8gRm9yIEN1Y3VtYmVyOiBDaGVja3Mgc2NlbmFyaW9zIHRoYXQgcmFuIChpLmUuIG5vdCBza2lwcGVkKSBvbiB0aGUgc2Vzc2lvblxuICAgIC8vIE9ubHkgMSBTY2VuYXJpbyByYW4gYW5kIG9wdGlvbiBlbmFibGVkID0+IFJlZGVmaW5lIHNlc3Npb24gbmFtZSB0byBTY2VuYXJpbydzIG5hbWVcbiAgICBpZiAocHJlZmVyU2NlbmFyaW9OYW1lICYmIHRoaXMuX3NjZW5hcmlvc1RoYXRSYW4ubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLl9mdWxsVGl0bGUgPSB0aGlzLl9zY2VuYXJpb3NUaGF0UmFuLnBvcCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXR1cyA9ICdzdGF0dXM6ICcgKyAocmVzdWx0ID4gMCA/ICdmYWlsZWQnIDogJ3Bhc3NlZCcpO1xuXG4gICAgaWYgKCF0aGlzLl9icm93c2VyLmlzTXVsdGlyZW1vdGUpIHtcbiAgICAgIGxvZy5pbmZvKGBVcGRhdGUgam9iIHdpdGggc2Vzc2lvbklkICR7dGhpcy5fYnJvd3Nlci5zZXNzaW9uSWR9LCAke3N0YXR1c31gKTtcbiAgICAgIHJldHVybiB0aGlzLl91cGRhdGUoeyBzZXNzaW9uSWQ6IHRoaXMuX2Jyb3dzZXIuc2Vzc2lvbklkLCBmYWlsdXJlczogcmVzdWx0IH0pO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyh0aGlzLl9jYXBhYmlsaXRpZXMpLm1hcChicm93c2VyTmFtZSA9PiB7XG4gICAgICBsb2cuaW5mbyhgVXBkYXRlIG11bHRpcmVtb3RlIGpvYiBmb3IgYnJvd3NlciAnJHticm93c2VyTmFtZX0nIGFuZCBzZXNzaW9uSWQgJHt0aGlzLl9icm93c2VyW2Jyb3dzZXJOYW1lXS5zZXNzaW9uSWR9LCAke3N0YXR1c31gKTtcbiAgICAgIHJldHVybiB0aGlzLl91cGRhdGUoeyBzZXNzaW9uSWQ6IHRoaXMuX2Jyb3dzZXJbYnJvd3Nlck5hbWVdLnNlc3Npb25JZCwgZmFpbHVyZXM6IGZhaWx1cmVzLCBjYWxsZWRPblJlbG9hZDogZmFsc2UsIGJyb3dzZXJOYW1lOiBicm93c2VyTmFtZSB9KTtcbiAgICB9KSk7XG4gIH1cblxuICBhc3luYyBvblJlbG9hZChvbGRTZXNzaW9uSWQsIG5ld1Nlc3Npb25JZCkge1xuICAgIGlmICghdGhpcy5faXNTZXJ2aWNlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXR1cyA9ICh0aGlzLl9mYWlsdXJlcyA+IDAgPyAnZmFpbGVkJyA6ICdwYXNzZWQnKTtcblxuICAgIGlmICghdGhpcy5fYnJvd3Nlci5pc011bHRpcmVtb3RlKSB7XG4gICAgICBsb2cuaW5mbyhgVXBkYXRlIChyZWxvYWRlZCkgam9iIHdpdGggc2Vzc2lvbklkICR7b2xkU2Vzc2lvbklkfSwgJHtzdGF0dXN9YCk7XG5cbiAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZSh7IHNlc3Npb25JZDogb2xkU2Vzc2lvbklkLCBmdWxsVGl0bGU6IHRoaXMuX2N1cnJlbnRUZXN0VGl0bGUsIHN0YXR1czogc3RhdHVzLCBjYWxsZWRPblJlbG9hZDogdHJ1ZSB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBicm93c2VyTmFtZSA9IHRoaXMuX2Jyb3dzZXIuaW5zdGFuY2VzLmZpbHRlcihicm93c2VyTmFtZSA9PiB0aGlzLl9icm93c2VyW2Jyb3dzZXJOYW1lXS5zZXNzaW9uSWQgPT09IG5ld1Nlc3Npb25JZClbMF07XG4gICAgICBsb2cuaW5mbyhgVXBkYXRlIChyZWxvYWRlZCkgbXVsdGlyZW1vdGUgam9iIGZvciBicm93c2VyICcke2Jyb3dzZXJOYW1lfScgYW5kIHNlc3Npb25JZCAke29sZFNlc3Npb25JZH0sICR7c3RhdHVzfWApO1xuICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlKHsgc2Vzc2lvbklkIDogb2xkU2Vzc2lvbklkLCBmYWlsdXJlczp0aGlzLl9mYWlsdXJlcywgY2FsbGVkT25SZWxvYWQ6IHRydWUsIGJyb3dzZXJOYW1lOiBicm93c2VyTmFtZSB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9mYWlsUmVhc29ucyA9IFtdO1xuICAgIHRoaXMuX3NjZW5hcmlvc1RoYXRSYW4gPSBbXTtcbiAgICBkZWxldGUgdGhpcy5fc3VpdGVUaXRsZTtcbiAgICBkZWxldGUgdGhpcy5fZnVsbFRpdGxlO1xuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZSh7IHNlc3Npb25JZCwgZnVsbFRpdGxlLCBzdGF0dXMsIGZhaWx1cmVzLCBjYWxsZWRPblJlbG9hZCA9IGZhbHNlLCBicm93c2VyTmFtZSB9KSB7XG4gICAgaWYgKCF0aGlzLl9vcHRpb25zLnNldFNlc3Npb25TdGF0dXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2xlZXAgPSBtcyA9PiBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgbXMpKTtcbiAgICBhd2FpdCBzbGVlcCg1MDAwKTtcbiAgICBpZiAoY2FsbGVkT25SZWxvYWQpe1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlSm9iKHsgc2Vzc2lvbklkLCBmdWxsVGl0bGUsIHN0YXR1cywgY2FsbGVkT25SZWxvYWQsIGJyb3dzZXJOYW1lIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVKb2IoeyBzZXNzaW9uSWQsIF9mYWlsdXJlczogZmFpbHVyZXMsIGNhbGxlZE9uUmVsb2FkLCBicm93c2VyTmFtZSB9KTtcbiAgXG4gIH1cblxuICBhc3luYyB1cGRhdGVKb2IoeyBzZXNzaW9uSWQsIGZ1bGxUaXRsZSwgc3RhdHVzLCBfZmFpbHVyZXMsIGNhbGxlZE9uUmVsb2FkID0gZmFsc2UsIGJyb3dzZXJOYW1lIH0pIHtcbiAgICBcbiAgICBsZXQgYm9keSA9IHRoaXMuZ2V0Qm9keSh7IF9mYWlsdXJlcywgY2FsbGVkT25SZWxvYWQsIGJyb3dzZXJOYW1lIH0pO1xuICAgIGlmKGNhbGxlZE9uUmVsb2FkKXtcbiAgICAgICBib2R5ID0gdGhpcy5nZXRCb2R5KHsgZnVsbFRpdGxlLCBzdGF0dXMsIGNhbGxlZE9uUmVsb2FkLCBicm93c2VyTmFtZSB9KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVwZGF0ZVNlc3Npb25CeUlkKHNlc3Npb25JZCwgYm9keSwgdGhpcy5fbGFtYmRhQ3JlZGVudGlhbHMpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBjb25zb2xlLmxvZyhleCk7XG4gICAgfVxuICAgIHRoaXMuX2ZhaWx1cmVzID0gMDtcbiAgfVxuXG4gIGdldEJvZHkoeyBmdWxsVGl0bGUsIHN0YXR1cywgX2ZhaWx1cmVzLCBjYWxsZWRPblJlbG9hZCA9IGZhbHNlLCBicm93c2VyTmFtZSB9KSB7XG4gICAgbGV0IGJvZHkgPSB7fTtcbiAgICBpZiAoXG4gICAgICAhKFxuICAgICAgICAoIXRoaXMuX2Jyb3dzZXIuaXNNdWx0aXJlbW90ZSAmJiB0aGlzLl9jYXBhYmlsaXRpZXMubmFtZSkgfHxcbiAgICAgICAgKHRoaXMuX2Jyb3dzZXIuaXNNdWx0aXJlbW90ZSAmJlxuICAgICAgICAgIHRoaXMuX2NhcGFiaWxpdGllc1ticm93c2VyTmFtZV0uY2FwYWJpbGl0aWVzLm5hbWUpXG4gICAgICApXG4gICAgKSB7XG4gICAgICBib2R5Lm5hbWUgPSB0aGlzLl9mdWxsVGl0bGU7XG4gICAgICBpZihjYWxsZWRPblJlbG9hZCl7XG4gICAgICAgIGJvZHkubmFtZT1mdWxsVGl0bGU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jYXBhYmlsaXRpZXNbJ0xUOk9wdGlvbnMnXSAmJiB0aGlzLl9jYXBhYmlsaXRpZXNbJ0xUOk9wdGlvbnMnXS5uYW1lKSB7XG4gICAgICAgIGJvZHkubmFtZSA9IHRoaXMuX2NhcGFiaWxpdGllc1snTFQ6T3B0aW9ucyddLm5hbWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChicm93c2VyTmFtZSkge1xuICAgICAgICBib2R5Lm5hbWUgPSBgJHticm93c2VyTmFtZX06ICR7Ym9keS5uYW1lfWA7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxsZWRPblJlbG9hZCB8fCB0aGlzLl90ZXN0Q250KSB7XG4gICAgICAgIGxldCB0ZXN0Q250ID0gKyt0aGlzLl90ZXN0Q250O1xuXG4gICAgICAgIGlmICh0aGlzLl9icm93c2VyLmlzTXVsdGlyZW1vdGUpIHtcbiAgICAgICAgICB0ZXN0Q250ID0gTWF0aC5jZWlsKHRlc3RDbnQgLyB0aGlzLl9icm93c2VyLmluc3RhbmNlcy5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjYWxsZWRPblJlbG9hZCl7XG4gICAgICAgICAgYm9keS5uYW1lICs9IGAgKCR7dGVzdENudH0pYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBib2R5LnN0YXR1c19pbmQgPSBfZmFpbHVyZXMgPiAwID8gJ2ZhaWxlZCcgOiAncGFzc2VkJztcbiAgICBpZiAoY2FsbGVkT25SZWxvYWQpe1xuICAgICAgYm9keS5zdGF0dXNfaW5kID0gc3RhdHVzO1xuICAgIH1cbiAgICByZXR1cm4gYm9keTtcbiAgfVxuXG4gIGFzeW5jIHNldFNlc3Npb25OYW1lKHN1aXRlVGl0bGUsIHRlc3QpIHtcbiAgICBpZiAoIXRoaXMuX29wdGlvbnMuc2V0U2Vzc2lvbk5hbWUgfHwgIXN1aXRlVGl0bGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbmFtZSA9IHRoaXMuX3VzZVNjZW5hcmlvTmFtZSAmJiB0aGlzLl90ZXN0VGl0bGUgPyB0aGlzLl90ZXN0VGl0bGUgOiBzdWl0ZVRpdGxlO1xuICAgIGlmICh0aGlzLl9vcHRpb25zLnNlc3Npb25OYW1lRm9ybWF0KSB7XG4gICAgICBuYW1lID0gdGhpcy5fb3B0aW9ucy5zZXNzaW9uTmFtZUZvcm1hdChcbiAgICAgICAgICB0aGlzLl9jb25maWcsXG4gICAgICAgICAgdGhpcy5fY2FwYWJpbGl0aWVzLFxuICAgICAgICAgIHN1aXRlVGl0bGUsXG4gICAgICAgICAgdGVzdD8udGl0bGVcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0ZXN0ICYmICF0ZXN0LmZ1bGxOYW1lKSB7XG4gICAgICAvLyBNb2NoYVxuICAgICAgY29uc3QgcHJlID0gdGhpcy5fb3B0aW9ucy5zZXNzaW9uTmFtZVByZXBlbmRUb3BMZXZlbFN1aXRlVGl0bGUgPyBgJHtzdWl0ZVRpdGxlfSAtIGAgOiAnJztcbiAgICAgIGNvbnN0IHBvc3QgPSAhdGhpcy5fb3B0aW9ucy5zZXNzaW9uTmFtZU9taXRUZXN0VGl0bGUgPyBgIC0gJHt0ZXN0LnRpdGxlfWAgOiAnJztcbiAgICAgIG5hbWUgPSBgJHtwcmV9JHt0ZXN0LnBhcmVudH0ke3Bvc3R9YDtcbiAgICB9XG5cbiAgICBpZiAobmFtZSAhPT0gdGhpcy5fX2Z1bGxUaXRsZSkge1xuICAgICAgdGhpcy5fX2Z1bGxUaXRsZSA9IG5hbWU7XG4gICAgICBhd2FpdCB0aGlzLl9zZXRTZXNzaW9uTmFtZShuYW1lKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfc2V0U2Vzc2lvblJlbWFya3MoZXJyKXtcbiAgICBsZXQgcmVwbGFjZWRTdHJpbmcgPSBlcnIucmVwbGFjZSgvXCIvZywgXCInXCIpO1xuICAgIGxldCBlcnJvckN1c3RvbSA9YGxhbWJkYS1ob29rOiB7XCJhY3Rpb25cIjogXCJzZXRUZXN0U3RhdHVzXCIsXCJhcmd1bWVudHNcIjoge1wic3RhdHVzXCI6XCJmYWlsZWRcIixcInJlbWFya1wiOlwiJHtyZXBsYWNlZFN0cmluZ31cIn19YDtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5fYnJvd3Nlci5leGVjdXRlKGVycm9yQ3VzdG9tKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgfSBcbiAgfVxuXG4gIGFzeW5jIF9zZXRTZXNzaW9uTmFtZShzZXNzaW9uTmFtZSkge1xuICAgIGF3YWl0IHRoaXMuX2V4ZWN1dGVDb21tYW5kKGBsYW1iZGEtbmFtZT0ke3Nlc3Npb25OYW1lfWApO1xuICB9XG5cbiAgYXN5bmMgX2V4ZWN1dGVDb21tYW5kKGNtZCkge1xuICAgIGlmICghdGhpcy5fYnJvd3Nlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYnJvd3Nlci5pc011bHRpcmVtb3RlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXModGhpcy5fY2FwYWJpbGl0aWVzKS5tYXAoYXN5bmMgKGJyb3dzZXJOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGJyb3dzZXIgPSB0aGlzLl9icm93c2VyW2Jyb3dzZXJOYW1lXTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGJyb3dzZXIuZXhlY3V0ZShjbWQpO1xuICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fYnJvd3Nlci5leGVjdXRlKGNtZCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUFpRSxTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLGdCQUFBSCxHQUFBLEVBQUFJLEdBQUEsRUFBQUMsS0FBQSxJQUFBRCxHQUFBLEdBQUFFLGNBQUEsQ0FBQUYsR0FBQSxPQUFBQSxHQUFBLElBQUFKLEdBQUEsSUFBQU8sTUFBQSxDQUFBQyxjQUFBLENBQUFSLEdBQUEsRUFBQUksR0FBQSxJQUFBQyxLQUFBLEVBQUFBLEtBQUEsRUFBQUksVUFBQSxRQUFBQyxZQUFBLFFBQUFDLFFBQUEsb0JBQUFYLEdBQUEsQ0FBQUksR0FBQSxJQUFBQyxLQUFBLFdBQUFMLEdBQUE7QUFBQSxTQUFBTSxlQUFBTSxHQUFBLFFBQUFSLEdBQUEsR0FBQVMsWUFBQSxDQUFBRCxHQUFBLDJCQUFBUixHQUFBLGdCQUFBQSxHQUFBLEdBQUFVLE1B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